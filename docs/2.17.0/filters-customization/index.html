<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.17.0 plugin-docs plugin-id-default docs-doc-id-filters-customization">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Customizing search filters | Richie</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://richie.education/img/undraw_online.svg"><meta data-rh="true" name="twitter:image" content="https://richie.education/img/undraw_online.svg"><meta data-rh="true" property="og:url" content="https://richie.education/docs/2.17.0/filters-customization"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.17.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.17.0"><meta data-rh="true" name="docsearch:version" content="2.17.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.17.0"><meta data-rh="true" property="og:title" content="Customizing search filters | Richie"><meta data-rh="true" name="description" content="You may want to customize the filters on the left side bar of the search page."><meta data-rh="true" property="og:description" content="You may want to customize the filters on the left side bar of the search page."><link data-rh="true" rel="canonical" href="https://richie.education/docs/2.17.0/filters-customization"><link data-rh="true" rel="alternate" href="https://richie.education/docs/2.17.0/filters-customization" hreflang="en"><link data-rh="true" rel="alternate" href="https://richie.education/docs/2.17.0/filters-customization" hreflang="x-default"><script src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/assets/css/styles.22c0bede.css">
<link rel="preload" href="/assets/js/runtime~main.4fdf5c1e.js" as="script">
<link rel="preload" href="/assets/js/main.5fd1b6bf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Richie</b></a><a class="navbar__item navbar__link" href="/docs/discover">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/2.17.0/discover">2.17.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/filters-customization">Next</a></li><li><a class="dropdown__link" href="/docs/filters-customization">2.21.0</a></li><li><a class="dropdown__link" href="/docs/2.20.1/filters-customization">2.20.1</a></li><li><a class="dropdown__link" href="/docs/2.20.0/filters-customization">2.20.0</a></li><li><a class="dropdown__link" href="/docs/2.19.0/filters-customization">2.19.0</a></li><li><a class="dropdown__link" href="/docs/2.18.0/filters-customization">2.18.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.17.0/filters-customization">2.17.0</a></li><li><a class="dropdown__link" href="/docs/2.16.0/discover">2.16.0</a></li><li><a class="dropdown__link" href="/docs/2.15.1/discover">2.15.1</a></li><li><a class="dropdown__link" href="/docs/2.15.0/discover">2.15.0</a></li><li><a class="dropdown__link" href="/docs/2.14.1/discover">2.14.1</a></li><li><a class="dropdown__link" href="/docs/2.14.0/discover">2.14.0</a></li><li><a class="dropdown__link" href="/docs/2.13.0/discover">2.13.0</a></li><li><a class="dropdown__link" href="/docs/2.12.0/discover">2.12.0</a></li><li><a class="dropdown__link" href="/docs/2.11.0/discover">2.11.0</a></li><li><a class="dropdown__link" href="/docs/2.10.0/discover">2.10.0</a></li><li><a class="dropdown__link" href="/docs/2.9.1/discover">2.9.1</a></li><li><a class="dropdown__link" href="/docs/2.9.0/discover">2.9.0</a></li><li><a class="dropdown__link" href="/docs/2.8.2/discover">2.8.2</a></li><li><a class="dropdown__link" href="/docs/2.8.1/discover">2.8.1</a></li><li><a class="dropdown__link" href="/docs/2.8.0/discover">2.8.0</a></li><li><a class="dropdown__link" href="/docs/2.7.1/discover">2.7.1</a></li><li><a class="dropdown__link" href="/docs/2.7.0/discover">2.7.0</a></li><li><a class="dropdown__link" href="/docs/2.6.0/discover">2.6.0</a></li><li><a class="dropdown__link" href="/docs/2.5.0/discover">2.5.0</a></li><li><a class="dropdown__link" href="/docs/2.4.0/discover">2.4.0</a></li><li><a class="dropdown__link" href="/docs/2.3.3/discover">2.3.3</a></li><li><a class="dropdown__link" href="/docs/2.3.2/discover">2.3.2</a></li><li><a class="dropdown__link" href="/docs/2.3.1/discover">2.3.1</a></li><li><a class="dropdown__link" href="/docs/2.3.0/discover">2.3.0</a></li><li><a class="dropdown__link" href="/docs/2.2.0/discover">2.2.0</a></li><li><a class="dropdown__link" href="/docs/2.1.0/discover">2.1.0</a></li><li><a class="dropdown__link" href="/docs/2.0.1/discover">2.0.1</a></li><li><a class="dropdown__link" href="/docs/2.0.0/discover">2.0.0</a></li><li><a class="dropdown__link" href="/docs/1.17/discover">1.17</a></li><li><a class="dropdown__link" href="/docs/1.16/discover">1.16</a></li><li><a class="dropdown__link" href="/docs/1.15/discover">1.15</a></li><li><a class="dropdown__link" href="/docs/1.14/discover">1.14</a></li><li><a class="dropdown__link" href="/docs/1.13/discover">1.13</a></li><li><a class="dropdown__link" href="/docs/1.12/discover">1.12</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/help">Help</a><a href="https://github.com/openfun/richie" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.17.0/discover">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/2.17.0/filters-customization">Recipes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.17.0/filters-customization">Search filters customization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.17.0/django-react-interop">Django &amp; React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.17.0/building-the-frontend">Building the frontend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.17.0/frontend-overrides">Frontend overrides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.17.0/internationalization">I18n</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.17.0/lms-connection">LMS connection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.17.0/web-analytics">Web Analytics</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.17.0/installation">Contributing</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Richie<!-- --> <b>2.17.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/filters-customization">latest version</a></b> (<!-- -->2.21.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Recipes</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Search filters customization</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.17.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Customizing search filters</h1></header><p>You may want to customize the filters on the left side bar of the search page.</p><p>Richie makes it easy to choose which filters you want to display among the existing filters
and in which order. You can also configure the existing filters to change their title or the
way they behave. Lastly, you can completely override a filter or create your own custom filter
from scratch.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="filters-configuration">Filters configuration<a href="#filters-configuration" class="hash-link" aria-label="Direct link to Filters configuration" title="Direct link to Filters configuration">​</a></h2><p>Filters must first be defined in the <code>FILTERS_CONFIGURATION</code> setting. It is a dictionary defining
for each filter, a predefined <code>class</code> in the code where the filter is implemented and the
parameters to apply to this class when instantiating it.</p><p>Let&#x27;s study a few examples of filters in the default configuration:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILTERS_CONFIGURATION = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;pace&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;class&quot;: &quot;richie.apps.search.filter_definitions.StaticChoicesFilterDefinition&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;fragment_map&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;self-paced&quot;: [{&quot;bool&quot;: {&quot;must_not&quot;: {&quot;exists&quot;: {&quot;field&quot;: &quot;pace&quot;}}}}],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;lt-1h&quot;: [{&quot;range&quot;: {&quot;pace&quot;: {&quot;lt&quot;: 60}}}],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;1h-2h&quot;: [{&quot;range&quot;: {&quot;pace&quot;: {&quot;gte&quot;: 60, &quot;lte&quot;: 120}}}],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;gt-2h&quot;: [{&quot;range&quot;: {&quot;pace&quot;: {&quot;gt&quot;: 120}}}],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;human_name&quot;: _(&quot;Weekly pace&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;min_doc_count&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;sorting&quot;: &quot;conf&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;values&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;self-paced&quot;: _(&quot;Self-paced&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;lt-1h&quot;: _(&quot;Less than one hour&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;1h-2h&quot;: _(&quot;One to two hours&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;gt-2h&quot;: _(&quot;More than two hours&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This filter uses the <code>StaticChoicesFilterDefinition</code> filter definition class and allows filtering
on the <code>pace</code> field present in the Elasticsearch index. The <code>values</code> parameter defines 4 ranges
and their human readable format that will appear as 4 filtering options to the user.</p><p>The <code>fragment_map</code> parameter defines a fragment of the Elasticsearch query to apply on the <code>pace</code>
field when one of these options is selected.</p><p>The <code>human_name</code>parameter defines how the filter is entitled. It is defined as a lazy i18n string
so that it can be translated.</p><p>The <code>sorting</code> parameter determines how the facets are sorted in the left side panel of the filter:</p><ul><li><code>conf</code>: facets are sorted as defined in the <code>values</code> configuration parameter</li><li><code>count</code>: facets are sorted according to the number of course results associated with each facet</li><li><code>name</code>: facets are sorted by their name in alphabetical order</li></ul><p>The <code>min_doc_count</code> parameter defines how many associated results a facet must have at the minimum
before it is displayed as an option for the filter.</p><p>Let&#x27;s study another interesting example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILTERS_CONFIGURATION = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;organizations&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;class&quot;: &quot;richie.apps.search.filter_definitions.IndexableHierarchicalFilterDefinition&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;human_name&quot;: _(&quot;Organizations&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;is_autocompletable&quot;: True,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;is_drilldown&quot;: False,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;is_searchable&quot;: True,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;min_doc_count&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;reverse_id&quot;: &quot;organizations&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This filter uses the <code>IndexableHierarchicalFilterDefinition</code> filter definition class and allows
filtering on the link between course pages and other pages identified by their IDs like for
example here <code>Organization</code> pages.</p><p>In the example above, when an option is selected, results will only include the courses for which
the <code>organizations</code> field in the index is including the ID of the selected organization page.</p><p>The <code>reverse_id</code> parameter should point to a page&#x27;s reverse ID (see DjangoCMS documentation) in
the CMS. The filter will propose a filtering option for each children organization under this
page.</p><p>The <code>is_autocompletable</code> field determines whether organizations should be searched and suggested
by the autocomplete feature (organizations must have an associated index and API endpoint for
autocompletion carrying the same name).</p><p>The <code>is_drilldown</code> parameter determines whether the filter is limited to one active value at a
time or allows multi-facetting.</p><p>The <code>is_searchable</code> field determines whether organizations filters should present a &quot;more options&quot;
button in case there are more facet options in results than can be displayed (organizations must
have an associated API endpoint for full-text search, carrying the same name).</p><p>Lastly, let&#x27;s look at nested filters which, as their name indicates, allow filtering on nested
fields.</p><p>For example, in the course index, one of the fields is named <code>course_runs</code> and contains a list of
objects in the following format:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;course_runs&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;start&quot;: &quot;2022-09-09T09:00:00.000000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;end&quot;: &quot;2021-10-30T00:00:00.000000Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;enrollment_start&quot;: &quot;2022-08-01T09:00:00.000000Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;enrollment_end&quot;: &quot;2022-09-08T00:00:00.000000Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;languages&quot;: [&quot;en&quot;, &quot;fr&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;start&quot;: &quot;2023-03-01T09:00:00.000000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;end&quot;: &quot;2023-06-03T00:00:00.000000Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;enrollment_start&quot;: &quot;2023-01-01T09:00:00.000000Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;enrollment_end&quot;: &quot;2023-03-01T00:00:00.000000Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;languages&quot;: [&quot;fr&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we want to filter courses that are available in the english language, we can thus configure the
following filter:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILTERS_CONFIGURATION = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;course_runs&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;class&quot;: &quot;richie.apps.search.filter_definitions.NestingWrapper&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;filters&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;languages&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;class&quot;: &quot;richie.apps.search.filter_definitions.LanguagesFilterDefinition&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;human_name&quot;: _(&quot;Languages&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        # There are too many available languages to show them all, all the time.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        # Eg. 200 languages, 190+ of which will have 0 matching courses.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;min_doc_count&quot;: 1,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="filters-presentation">Filters presentation<a href="#filters-presentation" class="hash-link" aria-label="Direct link to Filters presentation" title="Direct link to Filters presentation">​</a></h2><p>Which filters are displayed in the left side bar of the search page and in which order is defined
by the <code>RICHIE_FILTERS_PRESENTATION</code> setting.</p><p>This setting is expecting a list of strings, which are the names of the filters as defined
in the <code>FILTERS_CONFIGURATION</code> setting decribed in the previous section. If it, for example,
contains the 3 filters presented in the previous section, we could define the following
presentation:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">RICHIE_FILTERS_PRESENTATION = [&quot;organizations&quot;, &quot;languages&quot;, &quot;pace&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="writing-your-own-custom-filters">Writing your own custom filters<a href="#writing-your-own-custom-filters" class="hash-link" aria-label="Direct link to Writing your own custom filters" title="Direct link to Writing your own custom filters">​</a></h2><p>You can write your own filters from scratch although we must warn you that it is not trivial
because it requires a good knowledge of Elasticsearch and studying the mapping defined in the
<a href="https://github.com/openfun/richie/blob/master/src/richie/apps/search/indexers/courses.py" target="_blank" rel="noopener noreferrer">courses indexer</a>.</p><p>A filter is a class deriving from <a href="https://github.com/openfun/richie/blob/master/src/richie/apps/search/filter_definitions/base.py" target="_blank" rel="noopener noreferrer">BaseFilterDefinition</a> and defining methods to return the
information to display the filter and query fragments for elasticsearch:</p><ul><li><code>get_form_fields</code>: returns the form field instance that will be used to parse and validate this
filter&#x27;s values from the querystring</li><li><code>get_query_fragment</code>: returns the query fragment to use as filter in ElasticSearch</li><li><code>get_aggs_fragment</code>: returns the query fragment to use to extract facets from
ElasticSearch aggregations</li><li><code>get_facet_info</code>: returns the dynamic facet information from a filter&#x27;s Elasticsearch facet
results. Together with the facet&#x27;s static information, it will be used to display the filter
in its current status in the left side panel of the search page.</li></ul><p>We will not go into more details here about how filter definition classes work, but you can refer
to the code of the existing filters as good examples of what is possible. The code, although not
trivial, was given much care and includes many comments in an attempt to help writing new custom
filters. Of course, don&#x27;t hesitate to ask for help by
<a href="https://github.com/openfun/richie/issues" target="_blank" rel="noopener noreferrer">opening an issue</a>!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-10-28T13:14:33.000Z">Oct 28, 2022</time></b> by <b>jbpenrath</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.17.0/cookiecutter"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Start your own site</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.17.0/django-react-interop"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Django &amp; React</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#filters-configuration" class="table-of-contents__link toc-highlight">Filters configuration</a></li><li><a href="#filters-presentation" class="table-of-contents__link toc-highlight">Filters presentation</a></li><li><a href="#writing-your-own-custom-filters" class="table-of-contents__link toc-highlight">Writing your own custom filters</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/discover">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/versions">Versions</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Contributing</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/users">User Showcase</a></li><li class="footer__item"><a href="https://github.com/openfun/richie" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Creative Commons 2022 — Richie contributors / Illustrations Katerina Limpitsouni</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4fdf5c1e.js"></script>
<script src="/assets/js/main.5fd1b6bf.js"></script>
</body>
</html>