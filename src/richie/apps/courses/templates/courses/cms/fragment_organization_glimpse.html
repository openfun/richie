{% load i18n cms_tags extra_tags thumbnail %}
{% comment %}Obviously, the context template variable "organization" is required and must be an Organization page extension{% endcomment %}
{% with organization_page=organization.extended_object %}
<a class="organization-glimpse organization-glimpse--link{% if organization_page.publisher_is_draft is True %} organization-glimpse--draft{% endif %}" href="{{ organization_page.get_absolute_url }}" title="{{ organization_page.get_title }}">
  <div class="organization-glimpse__logo">
    {% get_placeholder_plugins "logo" organization_page as plugins or %}
      <p class="organization-glimpse__logo__empty">{% trans "Logo" %}</p>
    {% endget_placeholder_plugins %}
    {% blockplugin plugins.0 %}
      <img src="{% thumbnail instance.picture 300x300 crop upscale subject_location=instance.picture.subject_location %}"
        srcset="
          {% thumbnail instance.picture 300x300 crop upscale subject_location=instance.picture.subject_location %} 300w,
          {% if instance.picture.width >= 600 %}{% thumbnail instance.picture 600x600 crop upscale subject_location=instance.picture.subject_location %} 600w,{% endif %}
          {% if instance.picture.width >= 900 %}{% thumbnail instance.picture 900x900 crop upscale subject_location=instance.picture.subject_location %} 900w{% endif %}
        "
        sizes="300px"
        alt="{% if instance.picture.default_alt_text %}{{ instance.picture.default_alt_text }}{% else %}{% trans 'organization logo' %}{% endif %}"
      />
    {% endblockplugin %}
  </div>
  <div class="organization-glimpse__title">
    {{ organization_page.get_title }}
  </div>
</a>
{% endwith %}
