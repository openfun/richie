{% load cms_tags i18n %}
{% spaceless %}
{# If the current page is a draft, show draft courses with a class annotation for styling #}
<div class="course-glimpse-container">
{% if current_page.publisher_is_draft %}
  {% if instance.course.check_publication is True %}
    <a class="course-glimpse course-glimpse--link" href="{{ instance.course.public_extension.extended_object.get_absolute_url }}">
      {% include "courses/cms/fragment_course_glimpse.html" with page=instance.course.public_extension.extended_object course=instance.course %}
    </a>
  {% else %}
    <a class="course-glimpse course-glimpse--link course-glimpse--draft" href="{{ instance.course.extended_object.get_absolute_url }}">
      {% include "courses/cms/fragment_course_glimpse.html" with page=instance.course.extended_object course=instance.course %}
    </a>
  {% endif %}
{# If the current course page is the published version, show only the courses that are published #}
{% elif instance.course.check_publication is True %}
  <a class="course-glimpse course-glimpse--link" href="{{ instance.course.public_extension.extended_object.get_absolute_url }}">
    {% include "courses/cms/fragment_course_glimpse.html" with page=instance.course.public_extension.extended_object course=instance.course %}
  </a>
{% endif %}
</div>
{% endspaceless %}